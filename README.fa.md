# ๐ฅ ูุฏุฑุช ูุงุฑูุงู ุงุฑุงู

## [ุจุฑุง ูุดุงูุฏู ุจู ุฒุจุงู ูุงุฑุณ ฺฉูฺฉ ฺฉูุฏ](README.fa.md)

ฺฉ **ุงุณฺฉุฑูพุช ุงูู ู ุชุนุงูู Bash** ุจุฑุง ุงููโุณุงุฒ ุณุฑูุฑูุง ุงุฑุงู ุจุง ฺฉูุชุฑู ุฏูู ุฑู ุขโูพโูุง ู ูพูุฑุชโูุง ูุฌุงุฒ โ ูุฎุตูุต ุชูุธูุงุช ุชููููฺฏ.

> โ ุทุฑุงุญโุดุฏู ุจุฑุง ุชูููโูุง ูุงููุฏ **Rathole v2**ุ **Backhaul**ุ **Xray** ุง ุณุณุชูโูุง ูพุฑุงฺฉุณ ุดุฎุต


## ๐ก๏ธ ูฺฺฏโูุง ฺฉูุฏ

* โ ูุณุฏูุฏุณุงุฒ ฺฉุงูู ุชูุงู ุชุฑุงูฺฉ ูุฑูุฏ/ุฎุฑูุฌ ุจูโุตูุฑุช ูพุดโูุฑุถ
* ๐ ุงุฌุงุฒู ููุท ุจู ูพูุฑุชโูุง ุฎุงุต ุงุฒ ฺฉ **ุขโูพ ุฎุงุฑุฌ (ุบุฑ ุงุฑุงู)**
* ๐ ุบุฑูุนุงูโุณุงุฒ ูพูฺฏ (ICMP) ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุณฺฉู
* ๐พ ุฐุฎุฑู ุฎูุฏฺฉุงุฑ ููุงูู ูุงุฑูุงู ุจุง ุงุณุชูุงุฏู ุงุฒ `iptables-persistent`
* ๐ ุงูฺฉุงู ุจุงุฒูุดุงู ฺฉุงูู (ุฑุณุช) ุจุฑุง ุญุฐู ุชูุงู ูุญุฏูุฏุชโูุง
* ๐ฑ ููู ุชุนุงูู ุจุง ุงููุฌ โ ุจุฏูู ูุงุฒ ุจู ูุฑุงุด ุฏุณุช ุงุณฺฉุฑูพุช


## ๐ ุงุฌุฑุง ุณุฑุน ุจุง ฺฉ ุฎุท

ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุจุฑุง ุงุฌุฑุง ูุณุชูู ุงุณฺฉุฑูพุช ุงุณุชูุงุฏู ฺฉูุฏ:

```bash
bash <(curl -Ls https://raw.githubusercontent.com/power0matin/Iran-Firewall-Manager/main/firewall-manager.sh)
```

ุฏุฑ ุงู ูุฑุญูู ุงุฒ ุดูุง ุฎูุงุณุชู ูโุดูุฏ:

* ุขโูพ ุณุฑูุฑ ุฎุงุฑุฌ ุฑุง ูุงุฑุฏ ฺฉูุฏ
* ูุณุช ูพูุฑุชโูุง ูุฌุงุฒ ุฑุง ุชุนุฑู ฺฉูุฏ
* ููุงูู ุฑุง ุงุนูุงู ุง ุฑุณุช ฺฉูุฏ


## โ๏ธ ูพุดโูุงุฒูุง

* โ ุณุณุชูโุนุงูู Ubuntu ุง Debian
* ๐งโ๐ป ุฏุณุชุฑุณ ุจู Root
* ๐งฉ ูุตุจ ุฎูุฏฺฉุงุฑ `iptables` ู `iptables-persistent`


## ๐ ฺฏุฒููโูุง ููู

```
====== Firewall Management Menu ======
1) Apply restrictions (enter allowed IP and ports)
2) Reset firewall to open state
0) Exit
```


## ๐ ุจุงุฒูุดุงู ูุงุฑูุงู

ุจุง ุงูุชุฎุงุจ ฺฏุฒูู `2` ุชูุงู ุชูุธูุงุช ุญุฐู ูโุดููุฏ:

* ุญุฐู ฺฉุงูู ุชูุงู ููุงูู ูุงุฑูุงู
* ุชุบุฑ ุณุงุณุช ูพุดโูุฑุถ ุจู ACCEPT
* ูุนุงูโุณุงุฒ ูุฌุฏุฏ ูพูฺฏ
* ุญุฐู ูุงูโูุง ุฐุฎุฑูโุดุฏู
* ุญุฐู `iptables-persistent`


## ๐ฆ ุฎุฑูุฌ ููููู

```bash
[*] Installing iptables-persistent...
[*] Flushing existing firewall rules...
[*] Allowing localhost traffic...
[*] Allowing SSH on port 22...
[*] Applying rules for IP 1.2.3.4 and allowed ports...
  - Allowing port 443 from 1.2.3.4
  - Allowing port 8443 from 1.2.3.4
[*] Setting default policy to DROP...
[*] Disabling ICMP echo (ping)...
[*] Saving iptables rules...
[โ] Firewall rules applied successfully.
```


## โ๏ธ ูุดุฏุงุฑูุง

> ๐ **ุฏุฑ ูุงุฑุฏ ฺฉุฑุฏู ุขโูพ ุฏูุช ฺฉูุฏ.**
> ูุงุฑุฏ ฺฉุฑุฏู ุขโูพ ุงุดุชุจุงู ููฺฉู ุงุณุช ุจุงุนุซ **ูุทุน ุฏุณุชุฑุณ SSH** ุดูุฏ. ุญุชูุงู ูุจู ุงุฒ ุงุนูุงู ููุงุ ุชููู ุฑุง ุชุณุช ฺฉูุฏ.

> ๐ง **ูุงุฒ ุจู ูพูุฑุชโูุง ุฏฺฏุฑ ุฏุงุฑุฏุ (ูุซู DNS/NTP)**
> ูโุชูุงูุฏ ูุจู ุงุฒ ุฐุฎุฑูุ ููุงูู ุฏุณุช ุงุถุงูู ฺฉูุฏ:

```bash
iptables -A OUTPUT -p udp --dport 53 -j ACCEPT  # DNS
iptables -A OUTPUT -p udp --dport 123 -j ACCEPT # NTP
```

> ๐ก **ูพุดุชุจุงู ุงุฒ UDP ุจูโุตูุฑุช ูพุดโูุฑุถ ูุนุงู ูุณุช.**
> ุจุฑุง ูุฌุงุฒ ฺฉุฑุฏู UDPุ ุจุงุฏ ูุณุฎูโูุง `-p udp` ุงุฒ ููุงูู ุฎูุฏุชุงู ุฑุง ุฏุณุช ุงุถุงูู ฺฉูุฏ.


## โ ุชุณุชโุดุฏู ุฑู

* โ Ubuntu 20.04 / 22.04
* โ Debian 11 / 12
* โ KVMุ OpenVZุ NAT VPS (ููุท IPv4)


## ๐ ูุฌูุฒ

[ูุงุณูุณ MIT](LICENSE) โ ุฑุงฺฏุงู ุจุฑุง ุงุณุชูุงุฏู ุดุฎุตุ ุขููุฒุด ุง ุชุฌุงุฑ


## โจ ููุณูุฏู

ุณุงุฎุชู ุดุฏู ุจุง โค๏ธ ุชูุณุท [power0matin](https://github.com/power0matin)
ุงฺฏุฑ ููุฏ ุจูุฏ ูุทูุงู โญ ุจุฏูุฏ ู ุจุง ุฏฺฏุฑุงู ุจู ุงุดุชุฑุงฺฉ ุจฺฏุฐุงุฑุฏ.
