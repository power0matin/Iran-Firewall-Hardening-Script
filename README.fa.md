# ๐ ุงุณฺฉุฑูพุช ูุฏุฑุช ูุงุฑูุงู ุงูู ุจุฑุง ุณุฑูุฑูุง ุฏุงุฎู ุงุฑุงู  
## [Click to view in English](README.md)

ุงู ุงุณฺฉุฑูพุช ฺฉ ุงุจุฒุงุฑ ุชุนุงููุ ูุฏุฑุชููุฏ ู ฺฉุงููุงู ุฎูุฏฺฉุงุฑ ุจุฑุง **ุงููโุณุงุฒ ุณุฑูุฑูุง ุงุฑุงู** ุงุณุช ฺฉู ููุท ุงุฌุงุฒูโ ุฏุณุชุฑุณ ุจู ูพูุฑุชโูุง ูุดุฎุต ุงุฒ ฺฉ ุขโูพ ุฎุงุฑุฌ ุฑุง ูโุฏูุฏ ู ุชูุงู ุฏฺฏุฑ ุงุฑุชุจุงุทุงุช (ูุฑูุฏ/ุฎุฑูุฌ) ุฑุง ูุณุฏูุฏ ูโฺฉูุฏ.

> โ ููุงุณุจ ูพุฑูฺูโูุง ูุซู: **Rathole v2**ุ **Backhaul**ุ **Xray** ุง ุชูููโูุง ุดุฎุต TCP

## โจ ูฺฺฏโูุง

- ุจุณุชู ฺฉุงูู ุชุฑุงูฺฉ ูุฑูุฏ ู ุฎุฑูุฌ ุจูโุตูุฑุช ูพุดโูุฑุถ
- ุงุฌุงุฒู ุจู ููุท ูพูุฑุชโูุง ุฏูุฎูุงู ุงุฒ ุขโูพ ุฎุงุฑุฌ ูุดุฎุต
- ุบุฑูุนุงู ฺฉุฑุฏู ูพุงุณุฎ ุจู ูพูฺฏ (ูพููุงู ูุงูุฏู ุงุฒ ุงุณฺฉู)
- ุฐุฎุฑูโ ููุงูู ูุงุฑูุงู ุจุฑุง ุงุฌุฑุง ูพุณ ุงุฒ ุฑุจูุช ุจุง `iptables-persistent`
- ููู ฺฉุงููุงู ุชุนุงูู (ุจุฏูู ูุงุฒ ุจู ูุฑุงุด ุฏุณุช ุงุณฺฉุฑูพุช)
- ุงูฺฉุงู ุจุงุฒฺฏุฑุฏุงู ฺฉุงูู ุชูุธูุงุช ูุงุฑูุงู

## ๐ ุงุฌุฑุง ุณุฑุน ุจุง ฺฉ ุฎุท

ููุท ฺฉุงูุณุช ุงู ุฏุณุชูุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```bash
bash <(curl -Ls https://raw.githubusercontent.com/power0matin/Iran-Firewall-Manager/main/firewall-manager.sh)
```

ูพุณ ุงุฒ ุงุฌุฑุงุ ุงุณฺฉุฑูพุช ุงุฒ ุดูุง ูโูพุฑุณุฏ:

* ุขโูพ ุณุฑูุฑ ุฎุงุฑุฌ (ูุจุฏุฃ ูุฌุงุฒ)
* ูุณุช ูพูุฑุชโูุง ฺฉู ูโุฎูุงูุฏ ุงุฌุงุฒู ุฏุงุฏู ุดููุฏ (ุจุง ฺฉุงูุง ุฌุฏุง ฺฉูุฏ)

ู ุณูพุณ ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ููู ฺุฒ ุฑุง ุงูุฌุงู ูโุฏูุฏ.

## โ๏ธ ูพุดโูุงุฒูุง

* ุณุณุชู ุนุงูู Ubuntu ุง Debian
* ุฏุณุชุฑุณ ุฑูุช (`root`)
* ุงุจุฒุงุฑูุง `iptables` ู `iptables-persistent` (ุฏุฑ ุฒูุงู ุงุฌุฑุง ูุตุจ ูโุดููุฏ)

## ๐ ููู ุงุณฺฉุฑูพุช

```
====== Firewall Management Menu ======
1) Apply restrictions (enter allowed IP and ports)
2) Reset firewall to open state
0) Exit
```

## ๐ ุจุงุฒฺฏุฑุฏุงู ฺฉุงูู ูุงุฑูุงู

ุจุง ุงูุชุฎุงุจ ฺฏุฒููโ ฒ ุงุฒ ูููุ ูููโฺุฒ ุจู ุญุงูุช ูพุดโูุฑุถ ุจุงุฒูโฺฏุฑุฏุฏ:

* ุญุฐู ุชูุงู ููุงูู ูุงุฑูุงู (flush)
* ุจุงุฒ ฺฉุฑุฏู ุชูุงู ูุฑูุฏ/ุฎุฑูุฌโูุง (ACCEPT)
* ูุนุงูโุณุงุฒ ูุฌุฏุฏ ูพุงุณุฎ ุจู ูพูฺฏ
* ุญุฐู ูุงูโูุง ุฐุฎุฑูโุดุฏู ูุงุฑูุงู
* ุญุฐู ูพฺฉุฌ `iptables-persistent` (ุฏุฑ ุตูุฑุช ูุงุฒ)

## ๐งช ุฎุฑูุฌ ููููู

```bash
[*] Installing iptables-persistent...
[*] Flushing existing firewall rules...
[*] Allowing localhost traffic...
[*] Allowing SSH on port 22...
[*] Applying rules for IP 1.2.3.4 and allowed ports...
  - Allowing port 443 from 1.2.3.4
  - Allowing port 8443 from 1.2.3.4
[*] Setting default policy to DROP...
[*] Disabling ICMP echo (ping)...
[*] Saving iptables rules...
[โ] Firewall rules applied successfully.
```

## โ๏ธ ูุดุฏุงุฑูุง ููู

> ๐ ุงฺฏุฑ ุขโูพ ุงุดุชุจุงู ูุงุฑุฏ ฺฉูุฏ ุง ูพูุฑุช ุงุดุชุจุงู ุจุฏูุฏุ ููฺฉู ุงุณุช **ุฏุณุชุฑุณ SSH ุดูุง ุจู ุณุฑูุฑ ูุทุน ุดูุฏ.**

> ๐งช ูุจู ุงุฒ ุงุนูุงู ููุง ูุญุฏูุฏุชโูุงุ ุชููู ุฑุง ุงุฒ ุณูุช ุณุฑูุฑ ุฎุงุฑุฌ ุชุณุช ฺฉูุฏ.

> ๐ง ุงฺฏุฑ ูุงุฒ ุจู DNS ุง NTP ุฏุงุฑุฏุ ุจุงุฏ ุฏุณุช ูพูุฑุชโูุง `53` (DNS) ู `123` (NTP) ุฑุง ุฏุฑ ุฎุฑูุฌ ุจุงุฒ ฺฉูุฏ:

```bash
iptables -A OUTPUT -p udp --dport 53 -j ACCEPT
iptables -A OUTPUT -p udp --dport 123 -j ACCEPT
```

> ๐ก ุฏุฑ ุญุงู ุญุงุถุฑ ููุท ูพูุฑุชโูุง TCP ุจุงุฒ ูโุดููุฏ. ุจุฑุง UDP ุจุงุฏ ููุงูู ุฌุฏุฏ ุงุถุงูู ฺฉูุฏ.

## โ ุชุณุช ุดุฏู ุฑู

* Ubuntu 20.04 / 22.04
* Debian 11 / 12
* ุณุฑูุฑูุง KVM ู NAT-VPS
* ููุงุณุจ ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ุชููุฏ (Production)

## ๐ ูุฌูุฒ ุงุณุชูุงุฏู

ููุชุดุฑ ุดุฏู ุชุญุช [ูุงุณูุณ MIT](LICENSE)
ุงุณุชูุงุฏู ุงุฒ ุขู ุจุฑุง ูพุฑูฺูโูุง ุดุฎุตุ ุขููุฒุด ุง ุชุฌุงุฑ **ฺฉุงููุงู ุขุฒุงุฏ ุงุณุช**

## ๐ค ุณุงุฒูุฏู

ุณุงุฎุชู ุดุฏู ุจุง โค๏ธ ุชูุณุท [power0matin](https://github.com/power0matin)
ุงฺฏุฑ ุงู ุงุจุฒุงุฑ ุจุฑุงุชุงู ููุฏ ุจูุฏุ ูุทูุงู ุขู ุฑุง โญ ฺฉุฑุฏู ู ุจุง ุฏฺฏุฑุงู ุจู ุงุดุชุฑุงฺฉ ุจฺฏุฐุงุฑุฏ.
