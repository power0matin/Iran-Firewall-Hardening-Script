# ๐ฅ ูุฏุฑ ูุงุฑูุงู ุงุฑุงู

## [Click to view the English version.](README.md)

ฺฉ **ุงุณฺฉุฑูพุช ุงูู ู ุชุนุงูู Bash** ุจุฑุง ุงูุฒุงุด ุงููุช ุณุฑูุฑูุง ุงุฑุงู ุจุง ฺฉูุชุฑู ุฏูู ุขโูพโูุง ู ูพูุฑุชโูุง ูุฌุงุฒ โ ุงุฏูโุขู ุจุฑุง ุณุชุงูพโูุง ุชููููฺฏ.

> โ ุทุฑุงุญโุดุฏู ุจุฑุง ุชูููโูุง ูุงููุฏ **Rathole v2**ุ **Backhaul**ุ **Xray** ุง ุณุณุชูโูุง ูพุฑุงฺฉุณ ุฎุตูุต


## ๐ก๏ธ ูฺฺฏโูุง ฺฉูุฏ

* โ ูุณุฏูุฏุณุงุฒ ุชูุงู ุชุฑุงูฺฉ ูุฑูุฏ ู ุฎุฑูุฌ ุจูโุตูุฑุช ูพุดโูุฑุถ
* ๐ ููุท ุงุฌุงุฒู ุจู ุขโูพ ุณุฑูุฑ ุฎุงุฑุฌ (ุบุฑ ุงุฑุงู) ู ูพูุฑุชโูุง ูุดุฎุตโุดุฏู
* ๐ ุบุฑูุนุงูโุณุงุฒ Ping (ICMP) ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุณฺฉู
* ๐พ ุฐุฎุฑู ุฎูุฏฺฉุงุฑ ููุงูู ูุงุฑูุงู ุจุง `iptables-persistent`
* ๐ ุงูฺฉุงู **ุฑุณุช ฺฉุงูู** ููุงูู ู ุจุงุฒฺฏุฑุฏุงู ุจู ุญุงูุช ุจุงุฒ
* ๐ฑ ููู ุชุนุงูู ุจุง ุงููุฌ โ ุจุฏูู ูุงุฒ ุจู ูุฑุงุด ุงุณฺฉุฑูพุช
* ๐ ูพุดุชุจุงู ุงุฒ ููุงูู **TCP / UDP / ูุฑ ุฏู**
* ๐ง ุงุฏุขูุฑ **ุขุฎุฑู ุชูุธูุงุช ุฐุฎุฑูโุดุฏู** (IP + ูพูุฑุชโูุง)
* ๐งช ุชุณุช ุงุชุตุงู ุขโูพ ุฎุงุฑุฌ ุจุง **Ping Check**
* ๐ ููุงุด ูุถุนุช ูุนู ูพูุฑุชโูุง ุจุงุฒ ู ุขโูพโูุง ูุฌุงุฒ
* โ ฺฉุงููุงู ุชุนุงูู โ ุจุฏูู ูุงุฒ ุจู ููุดุชู ุฏุณุช ููุงูู


## ๐ ุงุฌุฑุง ุณุฑุน ุจุง ฺฉ ุฎุท ูุฑูุงู

ุจุฑุง ุงุฌุฑุง ุขุฎุฑู ูุณุฎูโ ุชููุชโุดุฏู (v2)ุ ฺฉุงูุณุช ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```bash
bash <(curl -Ls https://raw.githubusercontent.com/power0matin/Iran-Firewall-Manager/main/firewall-manager-v2.sh)
```

> โ **ูพุดููุงุฏุดุฏู:** ุดุงูู ุชูุงู ูฺฺฏโูุง ุฌุฏุฏ ูุซู ูพุดุชุจุงู ุงุฒ UDPุ ุชุณุช ุงุชุตุงูุ ุฐุฎุฑู ุชูุธูุงุช ู ููุงุด ูพูุฑุชโูุง


### ๐งช ูุณุฎู ุณุงุฏูโุชุฑ (v1)

ุงฺฏุฑ ุชุฑุฌุญ ูโุฏูุฏ ุงุฒ ูุณุฎูโ ุณุงุฏูโุชุฑ ู ุงููู ุงุณุชูุงุฏู ฺฉูุฏ:

```bash
bash <(curl -Ls https://raw.githubusercontent.com/power0matin/Iran-Firewall-Manager/main/firewall-manager.sh)
```

> โ๏ธ ุชูุฌู: ุงู ูุณุฎู ูุงูุฏ ููู ูพุดุฑูุชูุ ุงุนุชุจุงุฑุณูุฌ ู ุงูฺฉุงูุงุช ุงุถุงู ุงุณุช.


## ๐ฆ ููููู ุฎุฑูุฌ

```bash
[*] Installing iptables-persistent...
[*] Flushing existing firewall rules...
[*] Allowing localhost traffic...
[*] Allowing SSH on port 22...
[*] Applying rules for IP 1.2.3.4 and allowed ports...
  - Allowing TCP port 443 from 1.2.3.4
  - Allowing UDP port 443 from 1.2.3.4
[*] Setting default policy to DROP...
[*] Disabling ICMP echo (ping)...
[*] Saving iptables rules...
[โ] Firewall rules applied successfully.
```


## ๐ ููู ุจุฑูุงูู

```
====== Firewall Management Menu ======
1) Apply secure firewall restrictions
2) Reset firewall to open state
3) Show currently open ports
4) Enable secure mode (allow only selected IP and ports)
0) Exit
```


## โ๏ธ ูุดุฏุงุฑูุง

> ๐ **ุจุง ุฏูุช ุขโูพ ุฑุง ูุงุฑุฏ ฺฉูุฏ!**
> ูุฑูุฏ ุขโูพ ุงุดุชุจุงู ููฺฉู ุงุณุช ุจุงุนุซ ุดูุฏ ุฏุณุชุฑุณ SSH ุจู ุณุฑูุฑ ุฑุง ุงุฒ ุฏุณุช ุจุฏูุฏ. ุงุจุชุฏุง ุชููู ุฑุง ุชุณุช ฺฉุฑุฏู ู ุณูพุณ ูุงุฑูุงู ุฑุง ูุนุงู ฺฉูุฏ.

> ๐ง **ูุงุฒ ุจู ูพูุฑุชโูุง ุฎุงุต ูุซู DNS ุง NTP ุฏุงุฑุฏุ**
> ูโุชูุงูุฏ ูุจู ุงุฒ ุฐุฎุฑูโุณุงุฒุ ุฏุณุช ุงุถุงูู ฺฉูุฏ:

```bash
iptables -A OUTPUT -p udp --dport 53 -j ACCEPT  # DNS  
iptables -A OUTPUT -p udp --dport 123 -j ACCEPT # NTP  
```

> ๐ก ุงฺฉููู UDP ูุฒ **ูพุดุชุจุงู ูโุดูุฏ**. ููฺฏุงู ุงุณุชูุงุฏู ุงุฒ ูููุ ุจู `TCP`ุ `UDP` ุง `ูุฑุฏู` ุงูุชุฎุงุจ ฺฉูุฏ.


## ๐งฑ ูุงุฒูุง ูพุฑูฺู (ููุดู ุฑุงู)

ูพุฑูฺู ุจูโูุฑูุฑ ุจุง ูฺฺฏโูุง ุฌุฏุฏ ุจูโุฑูุฒุฑุณุงู ุฎูุงูุฏ ุดุฏ:

### ๐งฑ ููุดู ุฑุงู ุชูุณุนู

| ูุงุฒ          | ูุถุนุช           | ๐ง ูุงุจูุชโูุง ุจุฑูุงููโุฑุฒโุดุฏู                                                          | โ ุชูุถุญุงุช                                                       |
| ------------ | --------------- | -------------------------------------------------------------------------------------- | --------------------------------------------------------------- |
| ๐ข **ูุงุฒ 1** | โ ุงูุฌุงู ุดุฏู     | ๐ ููุงูู ุงููู TCP<br>๐ ุณูุฏ ฺฉุฑุฏู ุขโูพ<br>๐ซ ุจูุงฺฉ ููู ุจูโุตูุฑุช ูพุดโูุฑุถ               | ุณุงุฎุชุงุฑ ูพุงู ุจุง iptables ู ููู ุณุงุฏู                             |
| ๐ก **ูุงุฒ 2** | ๐ ุฏุฑ ุญุงู ุงูุฌุงู | ๐ฑ ููู ูพุดุฑูุชู<br>๐ฆ ูพุดุชุจุงู ุงุฒ UDP<br>๐ง ุงุฏุขูุฑ ุขุฎุฑู ุชูุธูุงุช<br>๐ฅ๏ธ ููุงุด ูพูุฑุชโูุง | ุญุงูุช Secureุ ุฐุฎุฑู ูุงู ุชูุธูุงุชุ UX ุจูุชุฑ                        |
| ๐ **ูุงุฒ 3** | ๐ ุขูุฏู ูุฒุฏฺฉ  | โฑ๏ธ ุจุงุฒฺฏุฑุฏุงู ุฎูุฏฺฉุงุฑ (ุฏุฑุตูุฑุช ูุทุน)<br>๐งช ูพุฑููุงู ุณุณุชู<br>๐ ุญุงูุช ุฑูุฒ/ุดุจ                 | ุฌููฺฏุฑ ุงุฒ ููู ุดุฏูุ ุณูุฆฺ ุจู ููุฏูุง dev/prodุ ููุงูู ุฒูุงูโูุญูุฑ |
| ๐ต **ูุงุฒ 4** | โณ ุจุฑูุงููโุฑุฒ   | ๐ ูุณุฏูุฏุณุงุฒ GeoIP<br>๐ ุฒูุงูโุจูุฏ ุฎูุฏฺฉุงุฑ\<br๐ฌ ููู ุฏู ุฒุจุงูู (EN/FA)                  | ููุชุฑ ฺฉุดูุฑูุงุ ุงุชููุงุณูู ุฑูุฒุงููุ ูพุดุชุจุงู ฺูุฏุฒุจุงูู               |
| ๐ฃ **ูุงุฒ 5** | ๐ง ูพุดุฑูุชู      | ๐ ูุงูุชูุฑ ุชุฑุงูฺฉ<br>๐จ ูุดุฏุงุฑ ุชูฺฏุฑุงู<br>๐ฅ ูุงฺฏ ุฎุงุฑุฌ                                   | ูุดุงูุฏู ูุญุธูโุงุ ูุดุฏุงุฑ ูููุฐุ ุงุฑุณุงู ูุงฺฏ ุจู ุณุฑูุฑ ุฏฺฏุฑ              |
| ๐ค **ูุงุฒ 6** | ๐งช ุขุฒูุงุด      | ๐ณ ูุงุฑูุงู ููุดููุฏ ุจุฑุง Docker<br>๐ ุฑุงุจุท API<br>๐ฅ ูุงฺฏ ฺูุฏฺฉุงุฑุจุฑู                       | ุงุชุตุงู ุจู ุฏุงฺฉุฑุ ฺฉูุชุฑู ุงุฒ ุฑุงู ุฏูุฑุ ูุงฺฏ ุฏุณุชุฑุณ ุงุฏููโูุง            |

๐ง **ูุงุฒ ูุนู:** `ูุงุฒ 2` โ ุชูุฑฺฉุฒ ุฑู ููู ุชุนุงููุ ุฐุฎุฑูโุณุงุฒ ูุงูุฏฺฏุงุฑ ู ูพุดุชุจุงู ุงุฒ UDP
๐ **ูุฑุญูู ุจุนุฏ:** ุงุฌุฑุง ุจุงุฒฺฏุฑุฏุงู ุฎูุฏฺฉุงุฑ ู ูพุฑููุงูโูุง ุชูุธูุงุช ุฏุฑ ูุงุฒ 3

ูพุดููุงุฏ ุฏุงุฑุฏุ ฺฉ [Issue](https://github.com/power0matin/Iran-Firewall-Manager/issues) ุจุงุฒ ฺฉูุฏ!


## โ๏ธ ูพุดโูุงุฒูุง

* โ ุณุณุชูโุนุงูู Ubuntu ุง Debian
* ๐งโ๐ป ุฏุณุชุฑุณ ุฑูุช
* ๐ฆ ูพฺฉุฌโูุง `iptables` ู `iptables-persistent` (ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ูุตุจ ูโุดูุฏ)


## โ ุชุณุชโุดุฏู ุฑู

* Ubuntu 20.04 / 22.04
* Debian 11 / 12
* ุงููุงุน VPS: KVMุ NATุ OpenVZ (ููุท IPv4)


## ๐ ูุฌูุฒ

[ูุฌูุฒ MIT](LICENSE) โ ุฑุงฺฏุงู ุจุฑุง ุงุณุชูุงุฏู ุดุฎุตุ ุขููุฒุด ุง ุชุฌุงุฑ.


## โจ ุณุงุฒูุฏู

ุณุงุฎุชู ุดุฏู ุจุง โค๏ธ ุชูุณุท [power0matin](https://github.com/power0matin)
ุงฺฏุฑ ุจุฑุงุชูู ููุฏ ุจูุฏุ ูุทูุงู ุฑูพู ุฑู โญ ฺฉูุฏ ู ุจู ุฏฺฏุฑุงู ูุนุฑู ฺฉูุฏ!
